- NoSQL数据库基本上来说是为了“使大量数据的*写入*处理更加容易(让增加服务器数量更容易)”而设计的。
- 典型NoSQL数据库分为临时性键值存储、永久性键值存储、面向文档的数据库、面向列的数据库。
  1. 临时性说明“数据有丢失的可能”，memcached属于该类。在内存中保存和读取，所以无法操作超出内存容量的数据，而且当mencached停止时，数据就不存在了。
  2. 永久性就是在硬盘上保存数据的(I/O操作)，相对于临时性的来说，性能没那么高，但是优点是数据不会丢失。Tokyo Tyrant、Flare、ROMA属于这种类型。
  3. 两者兼具的有Redis这种，临时性和永久性兼具。Redis首先把数据保存在内存中，在满足特定条件(默认是15分钟一次以上，5分钟内10个以上，1分钟内10000个以上的键发生变更)的时候将数据写到硬盘中。这样既确保了内存中数据的处理速度，又可以通过写入硬盘来保证数据的永久性。
  4. 面向文档的数据库，MongoDB、CouchDB就属于这种。它们属于NoSQL数据库，但与键值存储相异。
    - 面向文档的数据库不定义表结构，却像定义了表结构一样使用。关系型数据库在变更表结构时比较费事，而且为了保持一致性还需修改程序，然而NoSQL数据库则可省去这些麻烦。
    - 跟键值存储不同的是，面向文档的数据库可以通过复杂的查询条件来获取数据。虽然不具备事务处理和JOIN这些关系型数据库所具有的处理能力，但除此以外的其他处理基本上都能实现。
  5. 面向列的数据库有Hbase、HyperTable这些。
    - 关系型数据库以行为单位操作数据，被称为面向行的数据库。而面向列的数据库具有以列为单位来存储数据，擅长以列为单位读入数据。
    - 面向列的数据库具有高扩展性，即使数据增加也不会降低相应的处理速度(特别是写入速度)，所以它主要应用于需要处理大量数据的情况。

## memcached(临时)
- 随着数据量的增加，当memcached的内存无法保存所有数据的时候，可能就需要多台服务器来运行memcached，实际上通过多台服务器来运行memcached也是非常简单的。在使用多台服务器来运行memcached的时候，会使用*一致性散列*算法来分散数据。

## Tokyo Tyrant(永久)
- 永久性键值存储，在保存和读取数据的时候，与硬盘的IO处理无关，可以实现对数据的高速访问。它可以获得比关系型数据库快很多的处理速度。用户在获得高速返回响应的同时，又不必担心数据丢失的烦恼。
- 关于数据的读取方式，memcached只能通过与键完全一致的条件进行查询，而Tokyo Tyrant存在不同的数据库类型，可以进行范围查询或者像关系型数据库那样进行复杂条件的查询。

| 数据类型 | 数据的保存方式     | 特征 |
| :------------- | :------------- | :--------------------|
| 缓存数据库       | 以键值的形式把数据保存在内存中       | 和memcached相同 |
| 散列数据库 | 以键值的形式把数据保存在硬盘上 | 擅长随机存取 |
| B-tree数据库 | 一个键对应多个值的保存和读取。数据保存在硬盘上 | 擅长范围查询和连续访问 |
| 表格数据库 | 像关系型数据库那样通过多个字段把数据保存在硬盘上 | 可以进行复杂条件的查询 |


## Redis(临时/永久)
- 在完成取得数据、变更数据、保存数据这三步，虽然每一步只需要很短的时间，但由于都是单独的处理，所以不管怎样，数据的读取、变更和更新之间都会存在时间延迟。当多个请求同事对同一个键对应的数据进行更新的时候就可能发生数据不一致的情况。而Redis会把这样的一连串操作定义为原子操作，并且提供很多命令来保证数据的一致性。
- memcached主要用作关系型数据库的缓存，与关系型数据库结合使用，对简单的操作进行优化处理。与之相对，Redis本身就是作为数据存储而设计出来的，它的操作命令非常多，其中很多都支持原子操作。

## MongoDB(面向文档)
- MongoDB是无表结构的数据库，所以使用MongoDB的时候是不需要定义表结构的。而且，由于它无需定义表结构，所以对于任何key都可以像关系型数据库那样进行复杂查询等操作。MongoDB拥有比关系型数据库更快的处理速度，而且可以像关系型数据库那样通过添加索引来进行高速处理。


<u>memcached、Tokyo Tyrant、Redis是通过Consistent Hashing算法，根据键的散列值，以键为单位随机分散到不同的服务器上的。MongoDB的数据分散和它们不同，它是根据某个字段的范围把数据分散到不同的服务器上的。</u>

## 总结
### memcached
- 挥发性的键值存储
- 一般作为关系型数据库的缓存来使用
- 具有非常快的处理速度
- 由于存在数据丢失的可能，所以一般用来处理不需要持久保存的数据
- 用于需要使用expires时(需要定期清除数据)
- 使用Consistent Hashing(一致性哈希)算法来分散数据

### Tokyo Tyrant
- 持久性的键值存储
- 用来处理需要持久保存，高速处理的数据
- 具有非常快的处理速度
- 用于不需要定期清除数据时
- 使用Consistent Hashing(一致性哈希)算法来分散数据

### Redis
- 兼具memcached和Tokyo Tyrant优势的键值存储
- 擅长处理数组类型的数据
- 具有非常快的处理速度
- 可以高速处理时间序列的数据，易于处理集合运算
- 拥有很多可以进行原子处理的方法
- 使用Consistent Hashing(一致性哈希)算法来分散数据

### MongoDB
- 面向无需定义表结构的文档数据
- 具有非常快的处理速度
- 通过BSON的形式可以保存和查询任何类型的数据
- 无法进行JOIN处理，但是可以通过嵌入(embed)来实现同样的功能
- 使用sharding(范围分割)算法来分散数据
